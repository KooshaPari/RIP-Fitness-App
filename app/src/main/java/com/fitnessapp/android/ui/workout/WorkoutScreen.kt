package com.fitnessapp.android.ui.workout

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.LazyRow
import androidx.compose.foundation.lazy.items
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.*
import androidx.compose.material3.*
import androidx.compose.runtime.*
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import com.fitnessapp.android.ui.components.WorkoutProgressCard
import com.fitnessapp.android.ui.components.QuickActionCard
import com.fitnessapp.android.ui.components.RecentWorkoutCard

/**
 * Main workout screen displaying workout dashboard
 * 
 * Features:
 * - Weekly workout progress and streak tracking
 * - Quick access to start workouts, browse exercises
 * - Recent workout history with performance metrics
 * - Routine management and customization
 * - Progress charts and analytics
 * 
 * Integrates with workout data layer for real-time tracking
 * Supports both guided workouts and free-form exercise logging
 */

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun WorkoutScreen(
    onNavigateToExerciseBrowser: () -> Unit,
    onNavigateToWorkoutLogging: () -> Unit,
    onNavigateToRoutineBuilder: () -> Unit,
    onNavigateToProgressCharts: () -> Unit,
    modifier: Modifier = Modifier
) {
    // Mock data - will be replaced with actual data from ViewModel
    val weeklyWorkoutGoal = 5
    val workoutsThisWeek = 3
    val currentStreak = 12
    val totalWorkouts = 156
    val favoriteExercises = listOf(\"Push-ups\", \"Squats\", \"Deadlifts\", \"Bench Press\")\n\n    LazyColumn(\n        modifier = modifier\n            .fillMaxSize()\n            .padding(16.dp),\n        verticalArrangement = Arrangement.spacedBy(16.dp)\n    ) {\n        // Header with streak and stats\n        item {\n            Row(\n                modifier = Modifier.fillMaxWidth(),\n                horizontalArrangement = Arrangement.SpaceBetween,\n                verticalAlignment = Alignment.CenterVertically\n            ) {\n                Column {\n                    Text(\n                        text = \"Ready to Train?\",\n                        style = MaterialTheme.typography.headlineMedium,\n                        fontWeight = FontWeight.Bold\n                    )\n                    Text(\n                        text = \"Keep up the momentum!\",\n                        style = MaterialTheme.typography.bodyMedium,\n                        color = MaterialTheme.colorScheme.onSurfaceVariant\n                    )\n                }\n                Column(\n                    horizontalAlignment = Alignment.End\n                ) {\n                    Row(\n                        verticalAlignment = Alignment.CenterVertically\n                    ) {\n                        Icon(\n                            imageVector = Icons.Default.LocalFireDepartment,\n                            contentDescription = \"Streak\",\n                            tint = MaterialTheme.colorScheme.primary\n                        )\n                        Spacer(modifier = Modifier.width(4.dp))\n                        Text(\n                            text = \"$currentStreak day streak\",\n                            style = MaterialTheme.typography.bodyMedium,\n                            color = MaterialTheme.colorScheme.primary,\n                            fontWeight = FontWeight.SemiBold\n                        )\n                    }\n                    Text(\n                        text = \"$totalWorkouts total workouts\",\n                        style = MaterialTheme.typography.bodySmall,\n                        color = MaterialTheme.colorScheme.onSurfaceVariant\n                    )\n                }\n            }\n        }\n\n        // Weekly progress card\n        item {\n            WorkoutProgressCard(\n                title = \"This Week's Progress\",\n                current = workoutsThisWeek,\n                goal = weeklyWorkoutGoal,\n                streakDays = currentStreak\n            )\n        }\n\n        // Quick actions\n        item {\n            Text(\n                text = \"Quick Start\",\n                style = MaterialTheme.typography.titleMedium,\n                fontWeight = FontWeight.SemiBold\n            )\n        }\n\n        item {\n            LazyRow(\n                horizontalArrangement = Arrangement.spacedBy(12.dp)\n            ) {\n                items(\n                    listOf(\n                        \"Start Workout\" to Icons.Default.PlayArrow,\n                        \"Browse Exercises\" to Icons.Default.Search,\n                        \"Build Routine\" to Icons.Default.Build,\n                        \"View Progress\" to Icons.Default.TrendingUp\n                    )\n                ) { (title, icon) ->\n                    QuickActionCard(\n                        title = title,\n                        icon = icon,\n                        onClick = {\n                            when (title) {\n                                \"Start Workout\" -> onNavigateToWorkoutLogging()\n                                \"Browse Exercises\" -> onNavigateToExerciseBrowser()\n                                \"Build Routine\" -> onNavigateToRoutineBuilder()\n                                \"View Progress\" -> onNavigateToProgressCharts()\n                            }\n                        }\n                    )\n                }\n            }\n        }\n\n        // Favorite exercises\n        item {\n            Text(\n                text = \"Your Favorites\",\n                style = MaterialTheme.typography.titleMedium,\n                fontWeight = FontWeight.SemiBold\n            )\n        }\n\n        item {\n            LazyRow(\n                horizontalArrangement = Arrangement.spacedBy(8.dp)\n            ) {\n                items(favoriteExercises) { exercise ->\n                    FilterChip(\n                        onClick = { /* Navigate to exercise detail */ },\n                        label = { Text(exercise) },\n                        selected = false,\n                        leadingIcon = {\n                            Icon(\n                                imageVector = Icons.Default.FitnessCenter,\n                                contentDescription = null,\n                                modifier = Modifier.size(18.dp)\n                            )\n                        }\n                    )\n                }\n            }\n        }\n\n        // Recent workouts\n        item {\n            Row(\n                modifier = Modifier.fillMaxWidth(),\n                horizontalArrangement = Arrangement.SpaceBetween,\n                verticalAlignment = Alignment.CenterVertically\n            ) {\n                Text(\n                    text = \"Recent Workouts\",\n                    style = MaterialTheme.typography.titleMedium,\n                    fontWeight = FontWeight.SemiBold\n                )\n                TextButton(\n                    onClick = onNavigateToProgressCharts\n                ) {\n                    Text(\"View All\")\n                }\n            }\n        }\n\n        // Mock recent workouts data\n        items(\n            listOf(\n                \"Upper Body Strength\" to \"45 min\" to \"Yesterday\",\n                \"Cardio HIIT\" to \"30 min\" to \"2 days ago\",\n                \"Lower Body Power\" to \"50 min\" to \"3 days ago\",\n                \"Full Body Circuit\" to \"35 min\" to \"4 days ago\"\n            )\n        ) { (workoutName, duration, date) ->\n            RecentWorkoutCard(\n                workoutName = workoutName,\n                duration = duration,\n                date = date,\n                exercises = 8, // Mock number\n                onClick = { /* Navigate to workout details */ }\n            )\n        }\n\n        // Motivation section\n        item {\n            Card(\n                modifier = Modifier.fillMaxWidth(),\n                colors = CardDefaults.cardColors(\n                    containerColor = MaterialTheme.colorScheme.primaryContainer\n                )\n            ) {\n                Column(\n                    modifier = Modifier.padding(16.dp)\n                ) {\n                    Text(\n                        text = \"ðŸ’ª Daily Motivation\",\n                        style = MaterialTheme.typography.titleMedium,\n                        fontWeight = FontWeight.SemiBold,\n                        color = MaterialTheme.colorScheme.onPrimaryContainer\n                    )\n                    Spacer(modifier = Modifier.height(8.dp))\n                    Text(\n                        text = \"\\\"The only bad workout is the one that didn't happen. Keep pushing your limits!\\\"\",\n                        style = MaterialTheme.typography.bodyMedium,\n                        color = MaterialTheme.colorScheme.onPrimaryContainer\n                    )\n                }\n            }\n        }\n\n        // Add some bottom padding for fab\n        item {\n            Spacer(modifier = Modifier.height(80.dp))\n        }\n    }\n\n    // Floating action button for quick workout start\n    Box(\n        modifier = Modifier.fillMaxSize(),\n        contentAlignment = Alignment.BottomEnd\n    ) {\n        FloatingActionButton(\n            onClick = onNavigateToWorkoutLogging,\n            modifier = Modifier.padding(16.dp)\n        ) {\n            Icon(\n                imageVector = Icons.Default.PlayArrow,\n                contentDescription = \"Start workout\"\n            )\n        }\n    }\n}"